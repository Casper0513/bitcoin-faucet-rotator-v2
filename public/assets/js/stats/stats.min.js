function generateVisitorsTable(e,t){void 0!==e&&void 0!==t&&$(t).DataTable({processing:!0,data:e,language:{processing:"Loading..."},order:[[2,"desc"],[3,"desc"],[4,"desc"],[5,"desc"],[6,"desc"],[7,"asc"],[8,"desc"]],columns:[{data:"url"},{data:"pageTitle"},{data:"uniqueVisitors",type:"num",render:{_:"display",sort:"original"}},{data:"pageViews",type:"num",render:{_:"display",sort:"original"}},{data:"uniquePageViews",type:"num",render:{_:"display",sort:"original"}},{data:"aveSessionDuration",type:"num",render:{_:"display",sort:"original"}},{data:"aveTimeOnPage",type:"num",render:{_:"display",sort:"original"}},{data:"noOfBounces",type:"num",render:{_:"display",sort:"original"}},{data:"noOfCountries"}],responsive:!0})}function generateVisitorsLineChart(e,t){var a=getRandomRgb(),o=getRandomRgb();if(void 0!==e&&"error"!==e.status&&void 0!==t){var r=document.getElementById(t).getContext("2d"),n=[],s=[],i=[];e.forEach(function(e){n.push(new Date(e.date).formatDDMMYYYY()),s.push(parseInt(e.visitors)),i.push(parseInt(e.pageViews))});var u={type:"line",data:{labels:n,datasets:[{label:"Visitors",borderColor:rgbaString(a.r,a.g,a.b),backgroundColor:rgbaString(a.r,a.g,a.b,.5),data:s},{label:"Page views",borderColor:rgbaString(o.r,o.g,o.b),backgroundColor:rgbaString(o.r,o.g,o.b,.5),data:i}]},options:{showScale:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.8,pointDot:!1,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,maintainAspectRatio:!0,responsive:!0,tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return 0===e.datasetIndex?"Visitors: "+e.yLabel.toString():1===e.datasetIndex?"Page Views: "+e.yLabel.toString():void 0}}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Number of Visitors / Page Views"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Date"}}]}}};return new Chart(r,u)}}function getVisitorsDataAjax(e,t,a,o){void 0===o&&(o=10);var r={status:"error",message:"",code:""};if(void 0!==e&&null!==t&&null!==a){var n=laroute.route(e,{dateFrom:t,dateTo:a,quantity:o});return void 0===n?null:$.get(n,function(e){return e.data}).promise()}return r.message="Both dates cannot be null / empty.",r.code=500,n=laroute.route(e,{dateFrom:t,dateTo:a,quantity:o}),$.get(n,function(){return r}).promise()}function getBrowserStatsAjax(e,t,a){void 0===a&&(a=10);var o={status:"error",message:"",code:""};if(null!==e&&null!==t){var r=laroute.route("stats.top-x-browsers",{dateFrom:e,dateTo:t,maxBrowsers:a});return $.get(r,function(e){return e.data}).promise()}return o.message="Both dates cannot be null / empty.",o.code=500,r=laroute.route("stats.top-x-browsers",{dateFrom:e,dateTo:t,maxBrowsers:a}),$.get(r,function(){return o}).promise()}function generatePieDonutChart(e,t){if(void 0!==e&&void 0!==t){var a;if("."===t.charAt(0))a=document.getElementsByClassName(t.substr(1))[0];else{if("#"!==t.charAt(0))return console.log("Pie chart element is not correctly defined."),null;a=document.getElementById(t.substr(1))}var o=a.getContext("2d"),r={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0},n=[],s=[],i=[];return e.forEach(function(e){s.push(e.browser),i.push(parseInt(e.sessions)),n.push(getRandomHexColor())}),new Chart(o,{type:"doughnut",data:{labels:s,datasets:[{backgroundColor:n,data:i}],options:r}})}}function getCountriesAndVisitorsAjax(e,t){var a={status:"error",message:"",code:""};if(null!==e&&null!==t){var o=laroute.route("stats.countries-and-visitors",{dateFrom:e,dateTo:t});return $.get(o,function(e){return e.data}).promise()}return o=laroute.route("stats.countries-and-visitors",{dateFrom:e,dateTo:t}),a.message="Both dates cannot be null / empty.",a.code=500,$.get(o,function(){return a}).promise()}function generateGoogleGeoChart(e,t){var a;if("."===t.charAt(0))a=document.getElementsByClassName(t.substr(1))[0];else{if("#"!==t.charAt(0))return console.log("Pie chart element is not correctly defined."),null;a=document.getElementById(t.substr(1))}google.charts.load("current",{packages:["geochart"],mapsApiKey:"AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY"});for(var o=0;o<e.length;o++)isNaN(e[o][1])||(e[o][1]=parseInt(e[o][1]));var r=e,n=function(){a.innerHTML="";var e=google.visualization.arrayToDataTable(r),t={};t.width="90%",t.showLegend=!0,t.showZoomOut=!0,t.zoomOutLabel="Zoom Out",new google.visualization.GeoChart(a).draw(e,t)};google.charts.setOnLoadCallback(n);var s;jQuery(window).on("resize",function(){clearTimeout(s),s=setTimeout(function(){n()},250)}),jQuery(window).on("reload",function(){clearTimeout(s),s=setTimeout(function(){n()},250)})}$.fn.dataTable.ext.errMode="none",Date.prototype.formatDDMMYYYY=function(){return("0"+this.getDate()).slice(-2)+"/"+("0"+(this.getMonth()+1)).slice(-2)+"/"+this.getFullYear()};