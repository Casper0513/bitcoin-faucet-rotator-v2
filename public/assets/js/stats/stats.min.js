function generateVisitorsTable(e,t){void 0!==e&&void 0!==t&&$(t).DataTable({data:e,order:[[2,"desc"],[3,"desc"],[4,"desc"],[5,"desc"],[6,"desc"],[7,"asc"],[8,"desc"]],columns:[{data:"url"},{data:"pageTitle"},{data:"uniqueVisitors",type:"num",render:{_:"display",sort:"original"}},{data:"pageViews",type:"num",render:{_:"display",sort:"original"}},{data:"uniquePageViews",type:"num",render:{_:"display",sort:"original"}},{data:"aveSessionDuration",type:"num",render:{_:"display",sort:"original"}},{data:"aveTimeOnPage",type:"num",render:{_:"display",sort:"original"}},{data:"noOfBounces",type:"num",render:{_:"display",sort:"original"}},{data:"noOfCountries"}],responsive:!0})}function generateVisitorsLineChart(e,t){var a=getRandomRgb(),o=getRandomRgb();if(void 0!==e&&void 0!==t){var r=document.getElementById(t).getContext("2d"),n=[],i=[],s=[];e.forEach(function(e){n.push(new Date(e.date).formatDDMMYYYY()),i.push(parseInt(e.visitors)),s.push(parseInt(e.pageViews))});var d={type:"line",data:{labels:n,datasets:[{label:"Visitors",borderColor:rgbaString(a.r,a.g,a.b),backgroundColor:rgbaString(a.r,a.g,a.b,.5),data:i},{label:"Page views",borderColor:rgbaString(o.r,o.g,o.b),backgroundColor:rgbaString(o.r,o.g,o.b,.5),data:s}]},options:{showScale:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.8,pointDot:!1,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,maintainAspectRatio:!0,responsive:!0,tooltips:{mode:"index",intersect:!1,callbacks:{label:function(e,t){return 0===e.datasetIndex?"Visitors: "+e.yLabel.toString():1===e.datasetIndex?"Page Views: "+e.yLabel.toString():void 0}}},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Number of Visitors / Page Views"}}],xAxes:[{scaleLabel:{display:!0,labelString:"Date"}}]}}};return new Chart(r,d)}}function getVisitorsDataAjax(e,t,a,o){if(void 0===o&&(o=10),void 0!==e&&void 0!==t&&void 0!==a){var r=laroute.route(e,{dateFrom:t,dateTo:a,quantity:o});return void 0===r?null:$.get(r,function(e){return e.data}).promise()}return null}function getBrowserStatsAjax(e,t,a){if(void 0===a&&(a=10),void 0!==e&&void 0!==t){var o=laroute.route("stats.top-x-browsers",{dateFrom:e,dateTo:t,maxBrowsers:a});return $.get(o,function(e){return e.data}).promise()}return null}function generatePieDonutChart(e,t){if(void 0!==e&&void 0!==t){var a;if("."===t.charAt(0))a=document.getElementsByClassName(t.substr(1))[0];else{if("#"!==t.charAt(0))return console.log("Pie chart element is not correctly defined."),null;a=document.getElementById(t.substr(1))}var o=a.getContext("2d"),r={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0},n=[],i=[],s=[];return e.forEach(function(e){i.push(e.browser),s.push(parseInt(e.sessions)),n.push(getRandomHexColor())}),new Chart(o,{type:"doughnut",data:{labels:i,datasets:[{backgroundColor:n,data:s}],options:r}})}}function getCountriesAndVisitorsAjax(e,t){if(void 0!==e&&void 0!==t){var a=laroute.route("stats.countries-and-visitors",{dateFrom:e,dateTo:t});return $.get(a,function(e){return e.data}).promise()}return null}function generateGoogleGeoChart(e,t){var a;if("."===t.charAt(0))a=document.getElementsByClassName(t.substr(1))[0];else{if("#"!==t.charAt(0))return console.log("Pie chart element is not correctly defined."),null;a=document.getElementById(t.substr(1))}google.charts.load("current",{packages:["geochart"],mapsApiKey:"AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY"});for(var o=0;o<e.length;o++)isNaN(e[o][1])||(e[o][1]=parseInt(e[o][1]));var r=e,n=function(){a.innerHTML="";var e=google.visualization.arrayToDataTable(r),t={};t.width="90%",t.showLegend=!0,t.showZoomOut=!0,t.zoomOutLabel="Zoom Out",new google.visualization.GeoChart(a).draw(e,t)};google.charts.setOnLoadCallback(n);var i;jQuery(window).on("resize",function(){clearTimeout(i),i=setTimeout(function(){n()},250)}),jQuery(window).on("reload",function(){clearTimeout(i),i=setTimeout(function(){n()},250)})}Date.prototype.formatDDMMYYYY=function(){return this.getDate()+"/"+(this.getMonth()+1)+"/"+this.getFullYear()};